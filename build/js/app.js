"use strict";function loadAudio(e,t){for(var n=document.createElement("audio"),o=0;o<e.length;o+=1){var i=document.createElement("source");i.src=e[o],n.appendChild(i)}n.volume=.5;var s={dom:!1,state:"stop",play:function(){this.dom.play(),this.state="play"},replay:function(){this.dom.stop(),this.dom.play(),this.state="replay"},pause:function(){this.dom.pause(),this.state="pause"},stop:function(){this.dom.pause(),this.dom.currentTime=0,this.state="stop"},setVolume:function(e){this.dom.volume=e},getVolume:function(){return this.dom.volume}};return s.dom=n,s}function songCtrl(e,t){e.preventDefault(),songParam=t}!function(){function e(){o.fillStyle="black",o.clearRect(0,0,300,300),o.fillRect(i,s,50,50)}var t=void 0,n=document.getElementById("canvas"),o=n.getContext("2d"),i=10,s=10,c=function(){return requestAnimationFrame||webkitRequestAnimationFrame||mozRequestAnimationFrame||oRequestAnimationFrame||msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(),u=function(e){t=e,l()},l=function m(){t(),c(m)},r=function(e){t=e},a=function(){e(),i-=2,i<10&&r(d)},d=function(){e(),i+=2,i>=240&&r(a)};u(d)}();var song1=loadAudio(["build/sound/disney-s-jungle-book-nes-music-cutscenes-theme.mp3","build/sound/disney-s-jungle-book-nes-music-cutscenes-theme.wav","build/sound/disney-s-jungle-book-nes-music-cutscenes-theme.ogg"]),song2=loadAudio(["build/sound/disney-s-jungle-book-nes-music-ending-theme.mp3"],.1),body=document.querySelector("body");body.addEventListener("keyup",function(e){e.preventDefault(),27===e.keyCode&&(songParam="stop")});var currentSong=void 0,songParam="stop";setInterval(function(){"stop"===songParam?(song1.stop(),song2.stop()):"song2"===songParam?(currentSong=song2,song1.pause(),song2.play(),song2.setVolume(.5)):"song1"===songParam&&(currentSong=song1,song2.pause(),song1.play(),song1.setVolume(.25))},200),function(){function e(e,t,n){e.frameStep+=1,e.frameStep=e.frameStep%2!==0?1:e.frameStep/2%2>0?2:0,o.drawImage(e.dom,e.frameStep*e.width+1,65,e.width,e.height,t,n,e.width,e.height)}function t(e,t,n,o){var i=document.createElement("img"),s={dom:i,width:t||0,height:n||0,count:o||0,speed:1,loaded:!1,frameStep:0};return i.onload=function(){s.loaded=!0},i.src=e,s}var n=document.getElementById("canvas_3"),o=n.getContext("2d"),i=t("build/images/sprite.png",16,30),s=t("build/images/sprite.png",16,30),c=t("build/images/sprite.png",16,30),u=0;setInterval(function(){o.clearRect(0,0,100,100),e(i,u,0),e(s,2*u,30),e(c,3*u,60),u+=1},200)}(),function(){function e(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}function t(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function n(e,t,n){e.frameStep+=1,e.frameStep=e.frameStep%2!==0?1:e.frameStep/2%2>0?2:0,c.drawImage(e.dom,e.frameStep*e.width+1,65,e.width,e.height,t,n,e.width,e.height)}function o(e,t,n,o){var i=document.createElement("img"),s={dom:i,width:t||0,height:n||0,count:o||0,speed:1,loaded:!1,frameStep:0};return i.onload=function(){s.loaded=!0},i.src=e,s}var i=function(){var e=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement,t=document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled;console.log("fullscreenElement = ",e,"fullscreenEnabled = ",t)},s=document.getElementById("canvas_4"),c=s.getContext("2d");s.addEventListener("webkitfullscreenchange",i),s.addEventListener("mozfullscreenchange",i),s.addEventListener("fullscreenchange",i),s.onclick=function(){e(s),s.onclick=function(){t()}};var u=o("build/images/sprite.png",16,30),l=o("build/images/sprite.png",16,30),r=o("build/images/sprite.png",16,30),a=0;setInterval(function(){c.clearRect(0,0,100,100),n(u,a,0),n(l,2*a,30),n(r,3*a,60),a+=1},200)}(),function(){function e(){n.clearRect(0,0,100,100),u("W")?(document.getElementById("currentKeyName").innerHTML="Нажата кнопка W",n.fillText("Нажата W",20,20)):document.getElementById("currentKeyName").innerHTML="",u("S")&&(document.getElementById("currentKeyName").innerHTML="Нажата кнопка S",n.fillText("Нажата S",20,30))}var t=document.getElementById("canvas_5"),n=t.getContext("2d"),o={W:87,S:83,A:65,D:68},i={},s=function(e){i[e]=!0},c=function(e){i[e]=!1},u=function(e){return 1==i[o[e]]};window.onload=function(){window.onkeydown=function(e){s(e.keyCode)},window.onkeyup=function(e){c(e.keyCode)},l()};var l=function r(){"function"==typeof e?e():document.getElementById("lesson_5_content").innerHTML="Не определена функция engine",requestAnimationFrame(r)}}(),function(){var e=document.getElementById("position"),t=document.getElementById("cursor"),n=document.getElementById("pool"),o=0,i=0,s=0;n.onmousemove=function(e){var t=e||window.event;o=t.pageX,i=t.pageY},setInterval(function(){e.innerHTML="Позиция курсора "+o+" / "+i,t.style.left=o-20+"px",t.style.top=i-20+"px",s+=1,n.style.left>t.style.left&&(t.style.left=n.style.left)},1e3/60)}(),function(){var e=document.getElementById("canvas_7"),t=e.getContext("2d"),n=300,o=300;e.width=n,e.height=o,e.style.backgroundColor="#D0D0D0";var i=function(e,n,o,i,s){var c=e+o/2,u=n+i/2;s&&(s*=Math.PI/180,t.save(),t.translate(c,u),t.rotate(s),t.translate(-c,-u)),t.strokeRect(e,n,o,i),s&&t.restore()},s=10,c=10,u=0;setInterval(function(){t.clearRect(0,0,n,o),i(s,c,40,40,u),i(5*s,c,40,40,-u),i(s,5*c,40,40,-u),i(5*s,5*c,60,60,u),i(9*s,c,40,40,u),i(13*s,c,40,40,-u),i(s,9*c,40,40,u),i(s,13*c,40,40,-u),u++},1e3/60)}(),function(){var e=document.getElementById("canvas_8"),t=e.getContext("2d"),n=300,o=300;e.width=n,e.height=o,e.style.backgroundColor="#FFCFC2",t.fillStyle="#74BEFF",t.strokeStyle="#8F3AFF",t.lineWidth=4;var i=function(e,n,o,i){t.fillRect(e,n,o,i)},s=function(e,n,o,i){t.strokeRect(e,n,o,i)},c=function(e,t,n,o){this.x=e,this.y=t,this.w=o,this.h=o,this.selected=!1};c.prototype={draw:function(){i(this.x,this.y,this.w,this.h)},stroke:function(){s(this.x,this.y,this.w,this.h)},select:function(){this.selected=!this.selected}};for(var u=0,l=[];u<5;u+=1)l.push(new c(20+55*u,40,45,45));var r=function(e,t,n){return e>n.x&&e<n.x+n.w&&t>n.y&&t<n.y+n.h};e.onclick=function(e){var t=e.pageX-e.target.offsetLeft,n=e.pageY-e.target.offsetTop;for(u in l)r(t,n,l[u])&&l[u].select()},setInterval(function(){t.clearRect(0,0,n,o);for(u in l)l[u].draw(),l[u].selected&&l[u].stroke()},30)}(),function(){var e=document.getElementById("canvas_9"),t=e.getContext("2d"),n={x:0,y:0},o=!1,i=300,s=300;e.width=i,e.height=s,e.style.backgroundColor="#FFCFC2",t.fillStyle="#74BEFF",t.strokeStyle="#8F3AFF",t.lineWidth=4;var c=function(e,n,o,i){t.fillRect(e,n,o,i)},u=function(e,n,o,i){t.strokeRect(e,n,o,i)},l=function(e,t,n,o){this.x=e,this.y=t,this.w=o,this.h=o,this.selected=!1};l.prototype={draw:function(){c(this.x,this.y,this.w,this.h)},stroke:function(){u(this.x,this.y,this.w,this.h)},select:function(){this.selected=!this.selected}};for(var r=0,a=[];r<5;r+=1)a.push(new l(20+55*r,40,45,45));var d=function(e){return n.x>e.x&&n.x<e.x+e.w&&n.y>e.y&&n.y<e.y+e.h};setInterval(function(){t.clearRect(0,0,i,s);for(r in a)a[r].draw(),d(a[r])&&a[r].stroke();o&&(o.x=n.x-o.w/2,o.y=n.y-o.h/2)},30),e.onmousemove=function(e){n.x=e.pageX-e.target.offsetLeft,n.y=e.pageY-e.target.offsetTop},e.onmousedown=function(){if(n.down=!0,!o)for(var e in a)d(a[e])&&(o=a[e])},e.onmouseup=function(){n.down=!1,o=!1}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJsb2FkQXVkaW8iLCJhcnIiLCJ2b2wiLCJhdWRpbyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImkiLCJsZW5ndGgiLCJzb3VyY2UiLCJzcmMiLCJhcHBlbmRDaGlsZCIsInZvbHVtZSIsIm8iLCJkb20iLCJzdGF0ZSIsInBsYXkiLCJ0aGlzIiwicmVwbGF5Iiwic3RvcCIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJzZXRWb2x1bWUiLCJnZXRWb2x1bWUiLCJzb25nQ3RybCIsImUiLCJjdHJsIiwicHJldmVudERlZmF1bHQiLCJzb25nUGFyYW0iLCJkcmF3UmVjdCIsImNvbnRleHQiLCJmaWxsU3R5bGUiLCJjbGVhclJlY3QiLCJmaWxsUmVjdCIsIngiLCJ5IiwiZ2FtZUVuZ2luZSIsImNhbnZhcyIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIm5leHRHYW1lU3RlcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtc1JlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwic2V0VGltZW91dCIsImdhbWVFbmdpbmVTdGFydCIsImdhbWVFbmdpbmVTdGVwIiwic2V0R2FtZUVuZ2luZSIsImdhbWVMb29wTGVmdCIsImdhbWVMb29wUmlnaHQiLCJzb25nMSIsInNvbmcyIiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwia2V5Q29kZSIsImN1cnJlbnRTb25nIiwic2V0SW50ZXJ2YWwiLCJkcmF3SW1hZ2UiLCJpbWFnZU9iaiIsImNYIiwiY1kiLCJmcmFtZVN0ZXAiLCJ3aWR0aCIsImhlaWdodCIsImxvYWRJbWFnZSIsInBhdGgiLCJjb3VudCIsImltYWdlIiwicmVzdWx0Iiwic3BlZWQiLCJsb2FkZWQiLCJvbmxvYWQiLCJjb3AxIiwiY29wMiIsImNvcDMiLCJsYXVuY2hGdWxsU2NyZWVuIiwiZWxlbWVudCIsInJlcXVlc3RGdWxsU2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJ3ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiIsImNhbmNlbEZ1bGxTY3JlZW4iLCJtb3pDYW5jZWxGdWxsU2NyZWVuIiwid2Via2l0Q2FuY2VsRnVsbFNjcmVlbiIsIm9uZnVsbHNjcmVlbmNoYW5nZSIsImZ1bGxzY3JlZW5FbGVtZW50IiwibW96RnVsbHNjcmVlbkVsZW1lbnQiLCJ3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCIsImZ1bGxzY3JlZW5FbmFibGVkIiwibW96RnVsbHNjcmVlbkVuYWJsZWQiLCJ3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCIsImNvbnNvbGUiLCJsb2ciLCJvbmNsaWNrIiwiZW5naW5lIiwiaXNLZXlEb3duIiwiaW5uZXJIVE1MIiwiZmlsbFRleHQiLCJrZXlzIiwiVyIsIlMiLCJBIiwiRCIsImtleURvd24iLCJzZXRLZXkiLCJjbGVhcktleSIsImtleU5hbWUiLCJ3aW5kb3ciLCJvbmtleWRvd24iLCJvbmtleXVwIiwicG9zaXRpb24iLCJjdXJzb3IiLCJwb29sIiwiZHgiLCJvbm1vdXNlbW92ZSIsImV2ZW50IiwicGFnZVgiLCJwYWdlWSIsInN0eWxlIiwibGVmdCIsInRvcCIsImJhY2tncm91bmRDb2xvciIsInciLCJoIiwiYSIsImR5IiwiTWF0aCIsIlBJIiwic2F2ZSIsInRyYW5zbGF0ZSIsInJvdGF0ZSIsInN0cm9rZVJlY3QiLCJyZXN0b3JlIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJkcmF3RmlsbFJlY3QiLCJkcmF3U3Ryb2tlUmVjdCIsIlJlY3QiLCJzZWxlY3RlZCIsInByb3RvdHlwZSIsImRyYXciLCJzdHJva2UiLCJzZWxlY3QiLCJyZWN0IiwicHVzaCIsImlzQ3Vyc29ySW5SZWN0IiwidGFyZ2V0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm1vdXNlIiwib25tb3VzZWRvd24iLCJkb3duIiwi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QU9DLEVBQy9CLEtBQUs1RCxJQUFLMkksR0FDVEEsRUFBSzNJLEdBQUd3SSxPQUVKSyxFQUFlRixFQUFLM0ksS0FDdkIySSxFQUFLM0ksR0FBR3lJLFFBSU5ILEtBQ0hBLEVBQVMzRyxFQUFJc0gsRUFBTXRILEVBQUkyRyxFQUFTaEIsRUFBSSxFQUNwQ2dCLEVBQVMxRyxFQUFJcUgsRUFBTXJILEVBQUkwRyxFQUFTZixFQUFJLElBRW5DLElBRUh6RixFQUFPZ0YsWUFBYyxTQUFVNUYsR0FDOUIrSCxFQUFNdEgsRUFBSVQsRUFBRThGLE1BQVE5RixFQUFFNEgsT0FBT0MsV0FDN0JFLEVBQU1ySCxFQUFJVixFQUFFK0YsTUFBUS9GLEVBQUU0SCxPQUFPRSxXQUc5QmxILEVBQU9vSCxZQUFjLFdBRXBCLEdBREFELEVBQU1FLE1BQU8sR0FDUmIsRUFDSixJQUFLLEdBQUljLEtBQUtULEdBQ1RFLEVBQWVGLEVBQUtTLE1BQUtkLEVBQVdLLEVBQUtTLEtBS2hEdEgsRUFBT3VILFVBQVksV0FDbEJKLEVBQU1FLE1BQU8sRUFDYmIsR0FBVyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cdHZhciBnYW1lRW5naW5lID0gdm9pZCAwO1xuXG5cdHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XG5cdHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cblx0dmFyIHggPSAxMCxcblx0ICAgIHkgPSAxMDtcblxuXHRmdW5jdGlvbiBkcmF3UmVjdCgpIHtcblx0XHRjb250ZXh0LmZpbGxTdHlsZSA9ICdibGFjayc7XG5cdFx0Y29udGV4dC5jbGVhclJlY3QoMCwgMCwgMzAwLCAzMDApO1xuXHRcdGNvbnRleHQuZmlsbFJlY3QoeCwgeSwgNTAsIDUwKTtcblx0fVxuXG5cdHZhciBuZXh0R2FtZVN0ZXAgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgbW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IG9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgbXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0XHRzZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNjApO1xuXHRcdH07XG5cdH0oKTtcblxuXHR2YXIgZ2FtZUVuZ2luZVN0YXJ0ID0gZnVuY3Rpb24gZ2FtZUVuZ2luZVN0YXJ0KGNhbGxiYWNrKSB7XG5cdFx0Z2FtZUVuZ2luZSA9IGNhbGxiYWNrO1xuXHRcdGdhbWVFbmdpbmVTdGVwKCk7XG5cdH07XG5cblx0dmFyIGdhbWVFbmdpbmVTdGVwID0gZnVuY3Rpb24gZ2FtZUVuZ2luZVN0ZXAoKSB7XG5cdFx0Z2FtZUVuZ2luZSgpO1xuXHRcdG5leHRHYW1lU3RlcChnYW1lRW5naW5lU3RlcCk7XG5cdH07XG5cblx0dmFyIHNldEdhbWVFbmdpbmUgPSBmdW5jdGlvbiBzZXRHYW1lRW5naW5lKGNhbGxiYWNrKSB7XG5cdFx0Z2FtZUVuZ2luZSA9IGNhbGxiYWNrO1xuXHR9O1xuXG5cdHZhciBnYW1lTG9vcExlZnQgPSBmdW5jdGlvbiBnYW1lTG9vcExlZnQoKSB7XG5cdFx0ZHJhd1JlY3QoKTtcblx0XHR4IC09IDI7XG5cdFx0aWYgKHggPCAxMCkge1xuXHRcdFx0c2V0R2FtZUVuZ2luZShnYW1lTG9vcFJpZ2h0KTtcblx0XHR9XG5cdH07XG5cblx0dmFyIGdhbWVMb29wUmlnaHQgPSBmdW5jdGlvbiBnYW1lTG9vcFJpZ2h0KCkge1xuXHRcdGRyYXdSZWN0KCk7XG5cdFx0eCArPSAyO1xuXHRcdGlmICh4ID49IDI0MCkge1xuXHRcdFx0c2V0R2FtZUVuZ2luZShnYW1lTG9vcExlZnQpO1xuXHRcdH1cblx0fTtcblxuXHRnYW1lRW5naW5lU3RhcnQoZ2FtZUxvb3BSaWdodCk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgc29uZzEgPSBsb2FkQXVkaW8oWydidWlsZC9zb3VuZC9kaXNuZXktcy1qdW5nbGUtYm9vay1uZXMtbXVzaWMtY3V0c2NlbmVzLXRoZW1lLm1wMycsICdidWlsZC9zb3VuZC9kaXNuZXktcy1qdW5nbGUtYm9vay1uZXMtbXVzaWMtY3V0c2NlbmVzLXRoZW1lLndhdicsICdidWlsZC9zb3VuZC9kaXNuZXktcy1qdW5nbGUtYm9vay1uZXMtbXVzaWMtY3V0c2NlbmVzLXRoZW1lLm9nZyddKTtcbnZhciBzb25nMiA9IGxvYWRBdWRpbyhbJ2J1aWxkL3NvdW5kL2Rpc25leS1zLWp1bmdsZS1ib29rLW5lcy1tdXNpYy1lbmRpbmctdGhlbWUubXAzJ10sIDAuMSk7XG5cbmZ1bmN0aW9uIGxvYWRBdWRpbyhhcnIsIHZvbCkge1xuXHR2YXIgYXVkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0dmFyIHNvdXJjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuXHRcdHNvdXJjZS5zcmMgPSBhcnJbaV07XG5cdFx0YXVkaW8uYXBwZW5kQ2hpbGQoc291cmNlKTtcblx0fVxuXG5cdGF1ZGlvLnZvbHVtZSA9IDAuNSB8fCB2b2w7XG5cblx0dmFyIG8gPSB7XG5cdFx0ZG9tOiBmYWxzZSxcblx0XHRzdGF0ZTogJ3N0b3AnLFxuXHRcdHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7XG5cdFx0XHR0aGlzLmRvbS5wbGF5KCk7XG5cdFx0XHR0aGlzLnN0YXRlID0gJ3BsYXknO1xuXHRcdH0sXG5cdFx0cmVwbGF5OiBmdW5jdGlvbiByZXBsYXkoKSB7XG5cdFx0XHR0aGlzLmRvbS5zdG9wKCk7XG5cdFx0XHR0aGlzLmRvbS5wbGF5KCk7XG5cdFx0XHR0aGlzLnN0YXRlID0gJ3JlcGxheSc7XG5cdFx0fSxcblx0XHRwYXVzZTogZnVuY3Rpb24gcGF1c2UoKSB7XG5cdFx0XHR0aGlzLmRvbS5wYXVzZSgpO1xuXHRcdFx0dGhpcy5zdGF0ZSA9ICdwYXVzZSc7XG5cdFx0fSxcblx0XHRzdG9wOiBmdW5jdGlvbiBzdG9wKCkge1xuXHRcdFx0dGhpcy5kb20ucGF1c2UoKTtcblx0XHRcdHRoaXMuZG9tLmN1cnJlbnRUaW1lID0gMDtcblx0XHRcdHRoaXMuc3RhdGUgPSAnc3RvcCc7XG5cdFx0fSxcblx0XHRzZXRWb2x1bWU6IGZ1bmN0aW9uIHNldFZvbHVtZSh2b2wpIHtcblx0XHRcdHRoaXMuZG9tLnZvbHVtZSA9IHZvbDtcblx0XHR9LFxuXHRcdGdldFZvbHVtZTogZnVuY3Rpb24gZ2V0Vm9sdW1lKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZG9tLnZvbHVtZTtcblx0XHR9XG5cdH07XG5cblx0by5kb20gPSBhdWRpbztcblxuXHRyZXR1cm4gbztcbn1cblxudmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdGlmIChlLmtleUNvZGUgPT09IDI3KSB7XG5cdFx0c29uZ1BhcmFtID0gJ3N0b3AnO1xuXHR9XG59KTtcblxudmFyIGN1cnJlbnRTb25nID0gdm9pZCAwO1xudmFyIHNvbmdQYXJhbSA9ICdzdG9wJztcbmZ1bmN0aW9uIHNvbmdDdHJsKGUsIGN0cmwpIHtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRzb25nUGFyYW0gPSBjdHJsO1xufVxuXG5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdGlmIChzb25nUGFyYW0gPT09ICdzdG9wJykge1xuXHRcdHNvbmcxLnN0b3AoKTtcblx0XHRzb25nMi5zdG9wKCk7XG5cdH0gZWxzZSBpZiAoc29uZ1BhcmFtID09PSAnc29uZzInKSB7XG5cdFx0Y3VycmVudFNvbmcgPSBzb25nMjtcblx0XHRzb25nMS5wYXVzZSgpO1xuXHRcdHNvbmcyLnBsYXkoKTtcblx0XHRzb25nMi5zZXRWb2x1bWUoMC41KTtcblx0fSBlbHNlIGlmIChzb25nUGFyYW0gPT09ICdzb25nMScpIHtcblx0XHRjdXJyZW50U29uZyA9IHNvbmcxO1xuXHRcdHNvbmcyLnBhdXNlKCk7XG5cdFx0c29uZzEucGxheSgpO1xuXHRcdHNvbmcxLnNldFZvbHVtZSgwLjI1KTtcblx0fVxufSwgMjAwKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0dmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNfMycpLFxuXHQgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5cdHZhciBjb3AxID0gbG9hZEltYWdlKCdidWlsZC9pbWFnZXMvc3ByaXRlLnBuZycsIDE2LCAzMCk7XG5cdHZhciBjb3AyID0gbG9hZEltYWdlKCdidWlsZC9pbWFnZXMvc3ByaXRlLnBuZycsIDE2LCAzMCk7XG5cdHZhciBjb3AzID0gbG9hZEltYWdlKCdidWlsZC9pbWFnZXMvc3ByaXRlLnBuZycsIDE2LCAzMCk7XG5cdHZhciBpID0gMDtcblx0c2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHRcdGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIDEwMCwgMTAwKTtcblx0XHRkcmF3SW1hZ2UoY29wMSwgaSwgMCk7XG5cdFx0ZHJhd0ltYWdlKGNvcDIsIGkgKiAyLCAzMCk7XG5cdFx0ZHJhd0ltYWdlKGNvcDMsIGkgKiAzLCA2MCk7XG5cdFx0aSArPSAxO1xuXHR9LCAyMDApO1xuXG5cdGZ1bmN0aW9uIGRyYXdJbWFnZShpbWFnZU9iaiwgY1gsIGNZKSB7XG5cdFx0aW1hZ2VPYmouZnJhbWVTdGVwICs9IDE7XG5cblx0XHRpbWFnZU9iai5mcmFtZVN0ZXAgPSBpbWFnZU9iai5mcmFtZVN0ZXAgJSAyICE9PSAwID8gMSA6IGltYWdlT2JqLmZyYW1lU3RlcCAvIDIgJSAyID4gMCA/IDIgOiAwO1xuXG5cdFx0Y29udGV4dC5kcmF3SW1hZ2UoaW1hZ2VPYmouZG9tLCBpbWFnZU9iai5mcmFtZVN0ZXAgKiBpbWFnZU9iai53aWR0aCArIDEsIDY1LCBpbWFnZU9iai53aWR0aCwgaW1hZ2VPYmouaGVpZ2h0LCBjWCwgY1ksIGltYWdlT2JqLndpZHRoLCBpbWFnZU9iai5oZWlnaHQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEltYWdlKHBhdGgsIHdpZHRoLCBoZWlnaHQsIGNvdW50KSB7XG5cdFx0dmFyIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cblx0XHR2YXIgcmVzdWx0ID0ge1xuXHRcdFx0ZG9tOiBpbWFnZSxcblx0XHRcdHdpZHRoOiB3aWR0aCB8fCAwLFxuXHRcdFx0aGVpZ2h0OiBoZWlnaHQgfHwgMCxcblx0XHRcdGNvdW50OiBjb3VudCB8fCAwLFxuXHRcdFx0c3BlZWQ6IDEsXG5cdFx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdFx0ZnJhbWVTdGVwOiAwXG5cdFx0fTtcblx0XHRpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXN1bHQubG9hZGVkID0gdHJ1ZTtcblx0XHR9O1xuXHRcdGltYWdlLnNyYyA9IHBhdGg7XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBsYXVuY2hGdWxsU2NyZWVuKGVsZW1lbnQpIHtcblx0XHRpZiAoZWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlbikge1xuXHRcdFx0ZWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlbigpO1xuXHRcdH0gZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xuXHRcdFx0ZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xuXHRcdH0gZWxzZSBpZiAoZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbikge1xuXHRcdFx0ZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbigpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNhbmNlbEZ1bGxTY3JlZW4oKSB7XG5cdFx0aWYgKGRvY3VtZW50LmNhbmNlbEZ1bGxTY3JlZW4pIHtcblx0XHRcdGRvY3VtZW50LmNhbmNlbEZ1bGxTY3JlZW4oKTtcblx0XHR9IGVsc2UgaWYgKGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHtcblx0XHRcdGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcblx0XHR9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4pIHtcblx0XHRcdGRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgb25mdWxsc2NyZWVuY2hhbmdlID0gZnVuY3Rpb24gb25mdWxsc2NyZWVuY2hhbmdlKCkge1xuXHRcdHZhciBmdWxsc2NyZWVuRWxlbWVudCA9IGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50Lm1vekZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50O1xuXHRcdHZhciBmdWxsc2NyZWVuRW5hYmxlZCA9IGRvY3VtZW50LmZ1bGxzY3JlZW5FbmFibGVkIHx8IGRvY3VtZW50Lm1vekZ1bGxzY3JlZW5FbmFibGVkIHx8IGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkO1xuXHRcdGNvbnNvbGUubG9nKCdmdWxsc2NyZWVuRWxlbWVudCA9ICcsIGZ1bGxzY3JlZW5FbGVtZW50LCAnZnVsbHNjcmVlbkVuYWJsZWQgPSAnLCBmdWxsc2NyZWVuRW5hYmxlZCk7XG5cdH07XG5cblx0dmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNfNCcpLFxuXHQgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5cdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgb25mdWxsc2NyZWVuY2hhbmdlKTtcblx0Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLCBvbmZ1bGxzY3JlZW5jaGFuZ2UpO1xuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIG9uZnVsbHNjcmVlbmNoYW5nZSk7XG5cblx0Y2FudmFzLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdFx0bGF1bmNoRnVsbFNjcmVlbihjYW52YXMpO1xuXHRcdGNhbnZhcy5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0Y2FuY2VsRnVsbFNjcmVlbigpO1xuXHRcdH07XG5cdH07XG5cblx0dmFyIGNvcDEgPSBsb2FkSW1hZ2UoJ2J1aWxkL2ltYWdlcy9zcHJpdGUucG5nJywgMTYsIDMwKTtcblx0dmFyIGNvcDIgPSBsb2FkSW1hZ2UoJ2J1aWxkL2ltYWdlcy9zcHJpdGUucG5nJywgMTYsIDMwKTtcblx0dmFyIGNvcDMgPSBsb2FkSW1hZ2UoJ2J1aWxkL2ltYWdlcy9zcHJpdGUucG5nJywgMTYsIDMwKTtcblx0dmFyIGkgPSAwO1xuXHRzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdFx0Y29udGV4dC5jbGVhclJlY3QoMCwgMCwgMTAwLCAxMDApO1xuXHRcdGRyYXdJbWFnZShjb3AxLCBpLCAwKTtcblx0XHRkcmF3SW1hZ2UoY29wMiwgaSAqIDIsIDMwKTtcblx0XHRkcmF3SW1hZ2UoY29wMywgaSAqIDMsIDYwKTtcblx0XHRpICs9IDE7XG5cdH0sIDIwMCk7XG5cblx0ZnVuY3Rpb24gZHJhd0ltYWdlKGltYWdlT2JqLCBjWCwgY1kpIHtcblx0XHRpbWFnZU9iai5mcmFtZVN0ZXAgKz0gMTtcblxuXHRcdGltYWdlT2JqLmZyYW1lU3RlcCA9IGltYWdlT2JqLmZyYW1lU3RlcCAlIDIgIT09IDAgPyAxIDogaW1hZ2VPYmouZnJhbWVTdGVwIC8gMiAlIDIgPiAwID8gMiA6IDA7XG5cblx0XHRjb250ZXh0LmRyYXdJbWFnZShpbWFnZU9iai5kb20sIGltYWdlT2JqLmZyYW1lU3RlcCAqIGltYWdlT2JqLndpZHRoICsgMSwgNjUsIGltYWdlT2JqLndpZHRoLCBpbWFnZU9iai5oZWlnaHQsIGNYLCBjWSwgaW1hZ2VPYmoud2lkdGgsIGltYWdlT2JqLmhlaWdodCk7XG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkSW1hZ2UocGF0aCwgd2lkdGgsIGhlaWdodCwgY291bnQpIHtcblx0XHR2YXIgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuXHRcdHZhciByZXN1bHQgPSB7XG5cdFx0XHRkb206IGltYWdlLFxuXHRcdFx0d2lkdGg6IHdpZHRoIHx8IDAsXG5cdFx0XHRoZWlnaHQ6IGhlaWdodCB8fCAwLFxuXHRcdFx0Y291bnQ6IGNvdW50IHx8IDAsXG5cdFx0XHRzcGVlZDogMSxcblx0XHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0XHRmcmFtZVN0ZXA6IDBcblx0XHR9O1xuXHRcdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlc3VsdC5sb2FkZWQgPSB0cnVlO1xuXHRcdH07XG5cdFx0aW1hZ2Uuc3JjID0gcGF0aDtcblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cbn0pKCk7XG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cdHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzXzUnKSxcblx0ICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuXHR2YXIga2V5cyA9IHtcblx0XHQnVyc6IDg3LFxuXHRcdCdTJzogODMsXG5cdFx0J0EnOiA2NSxcblx0XHQnRCc6IDY4XG5cdH07XG5cblx0dmFyIGtleURvd24gPSB7fTtcblx0dmFyIHNldEtleSA9IGZ1bmN0aW9uIHNldEtleShrZXlDb2RlKSB7XG5cdFx0a2V5RG93bltrZXlDb2RlXSA9IHRydWU7XG5cdH07XG5cblx0dmFyIGNsZWFyS2V5ID0gZnVuY3Rpb24gY2xlYXJLZXkoa2V5Q29kZSkge1xuXHRcdGtleURvd25ba2V5Q29kZV0gPSBmYWxzZTtcblx0fTtcblxuXHQvLyB7IHtXOiA4N31bODddIDogdHJ1ZSB9XG5cdHZhciBpc0tleURvd24gPSBmdW5jdGlvbiBpc0tleURvd24oa2V5TmFtZSkge1xuXHRcdHJldHVybiBrZXlEb3duW2tleXNba2V5TmFtZV1dID09IHRydWU7XG5cdH07XG5cblx0d2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHR3aW5kb3cub25rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdHNldEtleShlLmtleUNvZGUpO1xuXHRcdH07XG5cdFx0d2luZG93Lm9ua2V5dXAgPSBmdW5jdGlvbiAoZSkge1xuXHRcdFx0Y2xlYXJLZXkoZS5rZXlDb2RlKTtcblx0XHR9O1xuXHRcdGdhbWVFbmdpbmUoKTtcblx0fTtcblxuXHRmdW5jdGlvbiBlbmdpbmUoKSB7XG5cdFx0Y29udGV4dC5jbGVhclJlY3QoMCwgMCwgMTAwLCAxMDApO1xuXHRcdGlmIChpc0tleURvd24oJ1cnKSkge1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRLZXlOYW1lJykuaW5uZXJIVE1MID0gJ9Cd0LDQttCw0YLQsCDQutC90L7Qv9C60LAgVyc7XG5cdFx0XHRjb250ZXh0LmZpbGxUZXh0KCfQndCw0LbQsNGC0LAgVycsIDIwLCAyMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50S2V5TmFtZScpLmlubmVySFRNTCA9ICcnO1xuXHRcdH1cblxuXHRcdGlmIChpc0tleURvd24oJ1MnKSkge1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRLZXlOYW1lJykuaW5uZXJIVE1MID0gJ9Cd0LDQttCw0YLQsCDQutC90L7Qv9C60LAgUyc7XG5cdFx0XHRjb250ZXh0LmZpbGxUZXh0KCfQndCw0LbQsNGC0LAgUycsIDIwLCAzMCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8g0JjQs9GA0L7QstC+0Lkg0YbQuNC60Ltcblx0dmFyIGdhbWVFbmdpbmUgPSBmdW5jdGlvbiBnYW1lRW5naW5lKCkge1xuXHRcdGlmICh0eXBlb2YgZW5naW5lID09ICdmdW5jdGlvbicpIHtcblx0XHRcdGVuZ2luZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVzc29uXzVfY29udGVudCcpLmlubmVySFRNTCA9ICfQndC1INC+0L/RgNC10LTQtdC70LXQvdCwINGE0YPQvdC60YbQuNGPIGVuZ2luZSc7XG5cdFx0fVxuXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVFbmdpbmUpO1xuXHR9O1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0dmFyIHBvc2l0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bvc2l0aW9uJyk7XG5cdHZhciBjdXJzb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vyc29yJyk7XG5cdHZhciBwb29sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bvb2wnKTtcblx0dmFyIHggPSAwLFxuXHQgICAgeSA9IDAsXG5cdCAgICBkeCA9IDA7XG5cblx0cG9vbC5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHZhciBlID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXHRcdHggPSBlLnBhZ2VYO1xuXHRcdHkgPSBlLnBhZ2VZO1xuXHR9O1xuXG5cdHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRwb3NpdGlvbi5pbm5lckhUTUwgPSAn0J/QvtC30LjRhtC40Y8g0LrRg9GA0YHQvtGA0LAgJyArIHggKyAnIC8gJyArIHk7XG5cdFx0Y3Vyc29yLnN0eWxlLmxlZnQgPSB4IC0gMjAgKyAncHgnO1xuXHRcdGN1cnNvci5zdHlsZS50b3AgPSB5IC0gMjAgKyAncHgnO1xuXHRcdGR4ICs9IDE7XG5cdFx0Ly8gcG9vbC5zdHlsZS5sZWZ0ID0gZHgrJ3B4JztcblxuXHRcdGlmIChwb29sLnN0eWxlLmxlZnQgPiBjdXJzb3Iuc3R5bGUubGVmdCkgY3Vyc29yLnN0eWxlLmxlZnQgPSBwb29sLnN0eWxlLmxlZnQ7XG5cdH0sIDEwMDAgLyA2MCk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHR2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhc183JyksXG5cdCAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cblx0dmFyIHdpZHRoID0gMzAwLFxuXHQgICAgaGVpZ2h0ID0gMzAwO1xuXG5cdGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuXHRjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRjYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNEMEQwRDAnO1xuXG5cdHZhciBkcmF3UmVjdCA9IGZ1bmN0aW9uIGRyYXdSZWN0KHgsIHksIHcsIGgsIGEpIHtcblx0XHR2YXIgZHggPSB4ICsgdyAvIDI7XG5cdFx0dmFyIGR5ID0geSArIGggLyAyO1xuXHRcdGlmIChhKSB7XG5cdFx0XHRhID0gYSAqIChNYXRoLlBJIC8gMTgwKTtcblx0XHRcdGNvbnRleHQuc2F2ZSgpO1xuXHRcdFx0Y29udGV4dC50cmFuc2xhdGUoZHgsIGR5KTtcblx0XHRcdGNvbnRleHQucm90YXRlKGEpO1xuXHRcdFx0Y29udGV4dC50cmFuc2xhdGUoLWR4LCAtZHkpO1xuXHRcdH1cblxuXHRcdGNvbnRleHQuc3Ryb2tlUmVjdCh4LCB5LCB3LCBoKTtcblxuXHRcdGlmIChhKSB7XG5cdFx0XHRjb250ZXh0LnJlc3RvcmUoKTtcblx0XHR9XG5cdH07XG5cblx0dmFyIHggPSAxMCxcblx0ICAgIHkgPSAxMCxcblx0ICAgIGEgPSAwO1xuXHRzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdFx0Y29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cdFx0ZHJhd1JlY3QoeCwgeSwgNDAsIDQwLCBhKTtcblx0XHRkcmF3UmVjdCg1ICogeCwgeSwgNDAsIDQwLCAtYSk7XG5cdFx0ZHJhd1JlY3QoeCwgNSAqIHksIDQwLCA0MCwgLWEpO1xuXHRcdGRyYXdSZWN0KDUgKiB4LCA1ICogeSwgNjAsIDYwLCBhKTtcblx0XHRkcmF3UmVjdCg5ICogeCwgeSwgNDAsIDQwLCBhKTtcblx0XHRkcmF3UmVjdCgxMyAqIHgsIHksIDQwLCA0MCwgLWEpO1xuXHRcdGRyYXdSZWN0KHgsIDkgKiB5LCA0MCwgNDAsIGEpO1xuXHRcdGRyYXdSZWN0KHgsIDEzICogeSwgNDAsIDQwLCAtYSk7XG5cdFx0Ly8geCsrO1xuXHRcdC8vIHkrKztcblx0XHRhKys7XG5cdH0sIDEwMDAgLyA2MCk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHR2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhc184JyksXG5cdCAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cblx0dmFyIHdpZHRoID0gMzAwLFxuXHQgICAgaGVpZ2h0ID0gMzAwO1xuXG5cdGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuXHRjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRjYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNGRkNGQzInO1xuXG5cdGNvbnRleHQuZmlsbFN0eWxlID0gJyM3NEJFRkYnO1xuXHRjb250ZXh0LnN0cm9rZVN0eWxlID0gJyM4RjNBRkYnO1xuXHRjb250ZXh0LmxpbmVXaWR0aCA9IDQ7XG5cblx0dmFyIGRyYXdGaWxsUmVjdCA9IGZ1bmN0aW9uIGRyYXdGaWxsUmVjdCh4LCB5LCB3LCBoKSB7XG5cdFx0Y29udGV4dC5maWxsUmVjdCh4LCB5LCB3LCBoKTtcblx0fTtcblxuXHR2YXIgZHJhd1N0cm9rZVJlY3QgPSBmdW5jdGlvbiBkcmF3U3Ryb2tlUmVjdCh4LCB5LCB3LCBoKSB7XG5cdFx0Y29udGV4dC5zdHJva2VSZWN0KHgsIHksIHcsIGgpO1xuXHR9O1xuXG5cdHZhciBSZWN0ID0gZnVuY3Rpb24gUmVjdCh4LCB5LCB3LCBoKSB7XG5cdFx0dGhpcy54ID0geDtcblx0XHR0aGlzLnkgPSB5O1xuXHRcdHRoaXMudyA9IGg7XG5cdFx0dGhpcy5oID0gaDtcblx0XHR0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG5cdH07XG5cblx0UmVjdC5wcm90b3R5cGUgPSB7XG5cdFx0ZHJhdzogZnVuY3Rpb24gZHJhdygpIHtcblx0XHRcdGRyYXdGaWxsUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xuXHRcdH0sXG5cdFx0c3Ryb2tlOiBmdW5jdGlvbiBzdHJva2UoKSB7XG5cdFx0XHRkcmF3U3Ryb2tlUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xuXHRcdH0sXG5cdFx0c2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoKSB7XG5cdFx0XHR0aGlzLnNlbGVjdGVkID0gIXRoaXMuc2VsZWN0ZWQ7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBpID0gMCxcblx0ICAgIHJlY3QgPSBbXTtcblx0Zm9yICg7IGkgPCA1OyBpICs9IDEpIHtcblx0XHRyZWN0LnB1c2gobmV3IFJlY3QoMjAgKyBpICogKDQ1ICsgMTApLCA0MCwgNDUsIDQ1KSk7XG5cdH1cblxuXHR2YXIgaXNDdXJzb3JJblJlY3QgPSBmdW5jdGlvbiBpc0N1cnNvckluUmVjdCh4LCB5LCByZWN0KSB7XG5cdFx0Ly8gY29uc29sZS5sb2coJy0tLT09PSByZWN0ID09PS0tLScsIHgsIHksIHJlY3QpO1xuXHRcdHJldHVybiB4ID4gcmVjdC54ICYmIHggPCByZWN0LnggKyByZWN0LncgJiYgeSA+IHJlY3QueSAmJiB5IDwgcmVjdC55ICsgcmVjdC5oO1xuXHR9O1xuXG5cdGNhbnZhcy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcblx0XHR2YXIgeCA9IGUucGFnZVggLSBlLnRhcmdldC5vZmZzZXRMZWZ0LFxuXHRcdCAgICB5ID0gZS5wYWdlWSAtIGUudGFyZ2V0Lm9mZnNldFRvcDtcblx0XHRmb3IgKGkgaW4gcmVjdCkge1xuXHRcdFx0aWYgKGlzQ3Vyc29ySW5SZWN0KHgsIHksIHJlY3RbaV0pKSB7XG5cdFx0XHRcdHJlY3RbaV0uc2VsZWN0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblx0XHRmb3IgKGkgaW4gcmVjdCkge1xuXHRcdFx0cmVjdFtpXS5kcmF3KCk7XG5cblx0XHRcdGlmIChyZWN0W2ldLnNlbGVjdGVkKSByZWN0W2ldLnN0cm9rZSgpO1xuXHRcdH1cblx0fSwgMzApO1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0dmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNfOScpLFxuXHQgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5cdHZhciBtb3VzZSA9IHsgeDogMCwgeTogMCB9O1xuXG5cdHZhciBzZWxlY3RlZCA9IGZhbHNlO1xuXG5cdHZhciB3aWR0aCA9IDMwMCxcblx0ICAgIGhlaWdodCA9IDMwMDtcblxuXHRjYW52YXMud2lkdGggPSB3aWR0aDtcblx0Y2FudmFzLmhlaWdodCA9IGhlaWdodDtcblx0Y2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRkZDRkMyJztcblxuXHRjb250ZXh0LmZpbGxTdHlsZSA9ICcjNzRCRUZGJztcblx0Y29udGV4dC5zdHJva2VTdHlsZSA9ICcjOEYzQUZGJztcblx0Y29udGV4dC5saW5lV2lkdGggPSA0O1xuXG5cdHZhciBkcmF3RmlsbFJlY3QgPSBmdW5jdGlvbiBkcmF3RmlsbFJlY3QoeCwgeSwgdywgaCkge1xuXHRcdGNvbnRleHQuZmlsbFJlY3QoeCwgeSwgdywgaCk7XG5cdH07XG5cblx0dmFyIGRyYXdTdHJva2VSZWN0ID0gZnVuY3Rpb24gZHJhd1N0cm9rZVJlY3QoeCwgeSwgdywgaCkge1xuXHRcdGNvbnRleHQuc3Ryb2tlUmVjdCh4LCB5LCB3LCBoKTtcblx0fTtcblxuXHR2YXIgUmVjdCA9IGZ1bmN0aW9uIFJlY3QoeCwgeSwgdywgaCkge1xuXHRcdHRoaXMueCA9IHg7XG5cdFx0dGhpcy55ID0geTtcblx0XHR0aGlzLncgPSBoO1xuXHRcdHRoaXMuaCA9IGg7XG5cdFx0dGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuXHR9O1xuXG5cdFJlY3QucHJvdG90eXBlID0ge1xuXHRcdGRyYXc6IGZ1bmN0aW9uIGRyYXcoKSB7XG5cdFx0XHRkcmF3RmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcblx0XHR9LFxuXHRcdHN0cm9rZTogZnVuY3Rpb24gc3Ryb2tlKCkge1xuXHRcdFx0ZHJhd1N0cm9rZVJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcblx0XHR9LFxuXHRcdHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KCkge1xuXHRcdFx0dGhpcy5zZWxlY3RlZCA9ICF0aGlzLnNlbGVjdGVkO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgaSA9IDAsXG5cdCAgICByZWN0ID0gW107XG5cdGZvciAoOyBpIDwgNTsgaSArPSAxKSB7XG5cdFx0cmVjdC5wdXNoKG5ldyBSZWN0KDIwICsgaSAqICg0NSArIDEwKSwgNDAsIDQ1LCA0NSkpO1xuXHR9XG5cblx0dmFyIGlzQ3Vyc29ySW5SZWN0ID0gZnVuY3Rpb24gaXNDdXJzb3JJblJlY3QocmVjdCkge1xuXHRcdHJldHVybiBtb3VzZS54ID4gcmVjdC54ICYmIG1vdXNlLnggPCByZWN0LnggKyByZWN0LncgJiYgbW91c2UueSA+IHJlY3QueSAmJiBtb3VzZS55IDwgcmVjdC55ICsgcmVjdC5oO1xuXHR9O1xuXG5cdHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblx0XHRmb3IgKGkgaW4gcmVjdCkge1xuXHRcdFx0cmVjdFtpXS5kcmF3KCk7XG5cblx0XHRcdGlmIChpc0N1cnNvckluUmVjdChyZWN0W2ldKSkge1xuXHRcdFx0XHRyZWN0W2ldLnN0cm9rZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChzZWxlY3RlZCkge1xuXHRcdFx0c2VsZWN0ZWQueCA9IG1vdXNlLnggLSBzZWxlY3RlZC53IC8gMjtcblx0XHRcdHNlbGVjdGVkLnkgPSBtb3VzZS55IC0gc2VsZWN0ZWQuaCAvIDI7XG5cdFx0fVxuXHR9LCAzMCk7XG5cblx0Y2FudmFzLm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGUpIHtcblx0XHRtb3VzZS54ID0gZS5wYWdlWCAtIGUudGFyZ2V0Lm9mZnNldExlZnQ7XG5cdFx0bW91c2UueSA9IGUucGFnZVkgLSBlLnRhcmdldC5vZmZzZXRUb3A7XG5cdH07XG5cblx0Y2FudmFzLm9ubW91c2Vkb3duID0gZnVuY3Rpb24gKCkge1xuXHRcdG1vdXNlLmRvd24gPSB0cnVlO1xuXHRcdGlmICghc2VsZWN0ZWQpIHtcblx0XHRcdGZvciAodmFyIGogaW4gcmVjdCkge1xuXHRcdFx0XHRpZiAoaXNDdXJzb3JJblJlY3QocmVjdFtqXSkpIHNlbGVjdGVkID0gcmVjdFtqXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Y2FudmFzLm9ubW91c2V1cCA9IGZ1bmN0aW9uICgpIHtcblx0XHRtb3VzZS5kb3duID0gZmFsc2U7XG5cdFx0c2VsZWN0ZWQgPSBmYWxzZTtcblx0fTtcbn0pKCk7Il19
